webpackJsonp([12],{Mt9p:function(e,t){"v0.4.6 Geetest Inc.";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e){"use strict";if(void 0===e)throw new Error("Geetest requires browser environment");var t=e.document,a=e.Math,o=t.getElementsByTagName("head")[0];function s(e){this._obj=e}function i(e){var t=this;new s(e)._each(function(e,n){t[e]=n})}s.prototype={_each:function(e){var t=this._obj;for(var n in t)t.hasOwnProperty(n)&&e(n,t[n]);return this}},i.prototype={api_server:"api.geetest.com",protocol:"http://",typePath:"/gettype.php",fallback_config:{slide:{static_servers:["static.geetest.com","dn-staticdown.qbox.me"],type:"slide",slide:"/static/js/geetest.0.0.0.js"},fullpage:{static_servers:["static.geetest.com","dn-staticdown.qbox.me"],type:"fullpage",fullpage:"/static/js/fullpage.0.0.0.js"}},_get_fallback_config:function(){return r(this.type)?this.fallback_config[this.type]:this.new_captcha?this.fallback_config.fullpage:this.fallback_config.slide},_extend:function(e){var t=this;new s(e)._each(function(e,n){t[e]=n})}};var r=function(e){return"string"==typeof e},c=function(e){return"object"===(void 0===e?"undefined":n(e))&&null!==e},l={},u={},d=function(e,t,n,a){t=function(e){return e.replace(/^https?:\/\/|\/$/g,"")}(t);var o=function(e){return 0!==(e=e.replace(/\/+/g,"/")).indexOf("/")&&(e="/"+e),e}(n)+function(e){if(!e)return"";var t="?";return new s(e)._each(function(e,n){(r(n)||function(e){return"number"==typeof e}(n)||function(e){return"boolean"==typeof e}(n))&&(t=t+encodeURIComponent(e)+"="+encodeURIComponent(n)+"&")}),"?"===t&&(t=""),t.replace(/&$/,"")}(a);return t&&(o=e+t+o),o},h=function(e,n,a,s,i){!function r(c){!function(e,n){var a=t.createElement("script");a.charset="UTF-8",a.async=!0,a.onerror=function(){n(!0)};var s=!1;a.onload=a.onreadystatechange=function(){s||a.readyState&&"loaded"!==a.readyState&&"complete"!==a.readyState||(s=!0,setTimeout(function(){n(!1)},0))},a.src=e,o.appendChild(a)}(d(e,n[c],a,s),function(e){e?c>=n.length-1?i(!0):r(c+1):i(!1)})}(0)},p=function(t,n,o,s){if(c(o.getLib))return o._extend(o.getLib),void s(o);if(o.offline)s(o._get_fallback_config());else{var i="geetest_"+(parseInt(1e4*a.random())+(new Date).valueOf());e[i]=function(t){"success"==t.status?s(t.data):t.status?s(o._get_fallback_config()):s(t),e[i]=void 0;try{delete e[i]}catch(e){}},h(o.protocol,t,n,{gt:o.gt,callback:i},function(e){e&&s(o._get_fallback_config())})}},f=function(e,t){var n={networkError:"网络错误",gtTypeError:"gt字段不是字符串类型"};if("function"!=typeof t.onError)throw new Error(n[e]);t.onError(n[e])};(e.Geetest||t.getElementById("gt_lib"))&&(u.slide="loaded"),e.initGeetest=function(t,n){var a=new i(t);t.https?a.protocol="https://":t.protocol||(a.protocol=e.location.protocol+"//"),"050cffef4ae57b5d5e529fea9540b0d1"!==t.gt&&"3bd38408ae4af923ed36e13819b14d42"!==t.gt||(a.apiserver="yumchina.geetest.com/",a.api_server="yumchina.geetest.com"),c(t.getType)&&a._extend(t.getType),p([a.api_server||a.apiserver],a.typePath,a,function(t){var o=t.type,s=function(){a._extend(t),n(new e.Geetest(a))};l[o]=l[o]||[];var i=u[o]||"init";"init"===i?(u[o]="loading",l[o].push(s),h(a.protocol,t.static_servers||t.domains,t[o]||t.path,null,function(e){if(e)u[o]="fail",f("networkError",a);else{u[o]="loaded";for(var t=l[o],n=0,s=t.length;n<s;n+=1){var i=t[n];"function"==typeof i&&i()}l[o]=[]}})):"loaded"===i?s():"fail"===i?f("networkError",a):"loading"===i&&l[o].push(s)})}}(window)},XVVD:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});n("PBmY");var a=n("I4Nl"),o=n.n(a),s=n("aM3M"),i=n("f+JS");n("Mt9p");var r=/^((1[3,5,8][0-9])|(14[5,7])|(17[0,6,7,8])|(19[7]))\d{8}$/,c={name:"login",components:{helmet:s.a,footerDom:i.a},data:function(){return{username:"",password:"",selected:"0",phoneNumber:"",verify:"",geetest:{},area:!1,validateCode:"",backNum:0,btnText:"获取验证码",validateSuccess:!1,areaSuccess:!1,backUrl:!1}},watch:{selected:function(){this.phoneNumber=""}},methods:{login:function(){var e=this;""!=this.phoneNumber.trim()?r.test(this.phoneNumber)?this.areaSuccess?""!=this.password.trim()?this.api.user.loginByPassword(this.phoneNumber,this.password,this.geetest.geetest_challenge,this.geetest.geetest_validate,this.geetest.geetest_seccode).then(function(t){"200"==t.code?e.routerJoin():(o()(t.message),e.getCode("areaVer"))}):o()("密码不能为空！"):o()("请进行登录验证！"):o()("请输入正确的手机号！"):o()("手机号不能为空！")},phonelogin:function(){var e=this;""!=this.phoneNumber?r.test(this.phoneNumber)?""!=this.verify?this.api.user.loginByPhone(this.phoneNumber,this.verify).then(function(t){"200"==t.code?e.checkHasPwd():(o()(t.message),e.getCode("areaVer"))}):o()("请输入验证码"):o()("您输入的手机号格式不对，请重新输入"):o()("请输入手机号")},checkHasPwd:function(){var e=this;this.api.user.accoutnInfo().then(function(t){"200"==t.code?t.model.isSetPassword?e.routerJoin():e.$router.push({name:"setpwd",params:{type:2}}):o()(t.message)})},routerJoin:function(){this.$store.getters.router;this.$store.getters.orderAffirm.length>0?this.$router.push({name:"order"}):this.$router.push({name:"home"})},getPhonevalidateCode:function(){var e=this;this.validateSuccess&&this.api.user.phoneValidationCode(this.phoneNumber,this.geetest.geetest_challenge,this.geetest.geetest_validate,this.geetest.geetest_seccode,2).then(function(t){if(200==t.code){e.backNum=60;var n=setInterval(function(){e.btnText="重新发送("+e.backNum+"秒)",e.backNum--,0==e.backNum&&(e.backNum=0,e.btnText="获取验证码",clearInterval(n))},1e3)}else o()(t.message)})},getCode:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"area";this.areaSuccess=!1,this.validateSuccess=!1,this.api.user.getValidateCode(this.phoneNumber).then(function(n){if(document.getElementById(t).innerHTML="","200"==n.code){var a=n.model;e.area=!0,initGeetest({area:"#"+t,gt:a.gt,challenge:a.challenge,offline:!a.success,new_captcha:a.new_captcha,product:"float",width:"100%"},function(n){n.appendTo("#"+t),n.onSuccess(function(){var t=n.getValidate();e.geetest={geetest_challenge:t.geetest_challenge,geetest_validate:t.geetest_validate,geetest_seccode:t.geetest_seccode},"1"==e.selected?(e.validateSuccess=!0,e.getPhonevalidateCode()):e.areaSuccess=!0})})}else o()(n.message)})},getverify:function(){""!=this.phoneNumber?r.test(this.phoneNumber)?0==this.backNum&&this.getCode():o()("您输入的手机号格式不对，请重新输入"):o()("请输入手机号")},phoneNumberChange:function(){r.test(this.phoneNumber)?this.getCode("areaVer"):this.areaSuccess=!1}},created:function(){this.$store.getters.jwt&&this.$router.push("user");var e=this.$store.getters.router;"/order"==e.fromPath||"/login"==e.fromPath?this.backUrl="/home":this.backUrl=e.fromPath}},l={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"login"},[n("helmet",{attrs:{title:"登录","back-url":e.backUrl,"right-text":"注册","right-url":"register","show-right":"true"}}),e._v(" "),n("mt-navbar",{model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}},[n("mt-tab-item",{attrs:{id:"0"}},[e._v("\n      账号密码登录\n    ")]),e._v(" "),n("mt-tab-item",{attrs:{id:"1"}},[e._v("\n      手机号快捷登录\n    ")])],1),e._v(" "),n("mt-tab-container",{model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}},[n("mt-tab-container-item",{attrs:{id:"0"}},[n("div",{staticClass:"form-box"},[n("div",{staticClass:"form-row"},[n("div",{staticClass:"login-p"}),e._v(" "),n("div",{staticClass:"input-box"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.phoneNumber,expression:"phoneNumber"}],attrs:{type:"text",placeholder:"请输入您的手机号",maxlength:"11"},domProps:{value:e.phoneNumber},on:{change:function(t){e.phoneNumberChange()},input:function(t){t.target.composing||(e.phoneNumber=t.target.value)}}})])]),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.area,expression:"area"}],attrs:{id:"areaVer"}}),e._v(" "),n("div",{staticClass:"form-row"},[n("div",{staticClass:"pwd-p"}),e._v(" "),n("div",{staticClass:"input-box"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],attrs:{type:"password",placeholder:"密码",maxlength:"20"},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}})])]),e._v(" "),n("div",{staticClass:"btn-row"},[n("button",{on:{click:function(t){e.login()}}},[e._v("登录")])])])]),e._v(" "),n("mt-tab-container-item",{attrs:{id:"1"}},[n("div",{staticClass:"form-box"},[n("div",{staticClass:"form-row"},[n("div",{staticClass:"login-h"}),e._v(" "),n("div",{staticClass:"input-box"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.phoneNumber,expression:"phoneNumber"}],attrs:{type:"text",placeholder:"请输入您的手机号",maxlength:"11"},domProps:{value:e.phoneNumber},on:{input:function(t){t.target.composing||(e.phoneNumber=t.target.value)}}})])]),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.area,expression:"area"}],attrs:{id:"area"}}),e._v(" "),n("div",{staticClass:"form-row"},[n("div",{staticClass:"pwd-p"}),e._v(" "),n("div",{staticClass:"input-box"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.verify,expression:"verify"}],attrs:{type:"text",placeholder:"验证码",maxlength:"6"},domProps:{value:e.verify},on:{input:function(t){t.target.composing||(e.verify=t.target.value)}}}),e._v(" "),n("button",{staticClass:"code-btn",on:{click:function(t){e.getverify()}}},[e._v(e._s(e.btnText))])])]),e._v(" "),n("div",{staticClass:"btn-row"},[n("button",{on:{click:function(t){e.phonelogin()}}},[e._v("登录")])]),e._v(" "),n("div",{staticClass:"notice"},[n("span",[e._v("温馨提示：未注册过药居士的手机号，登录时会自动注册药居士账号，且代表您已同意")]),e._v(" "),n("a",{attrs:{href:"#/clause"}},[e._v("《药居士服务条款》")])])])])],1),e._v(" "),n("footer-dom")],1)},staticRenderFns:[]};var u=n("vSla")(c,l,!1,function(e){n("qUNA")},"data-v-16fee883",null);t.default=u.exports},qUNA:function(e,t){}});
//# sourceMappingURL=12.153dc95810b41fd66ecf.js.map